{"openAPIV3Schema":{"properties":{"apiVersion":{"type":"string"},"kind":{"enum":["ApplicationConfiguration"],"type":"string"},"metadata":{"type":"object"},"spec":{"properties":{"components":{"items":{"properties":{"componentName":{"type":"string"},"dataInputs":{"items":{"properties":{"toFieldPaths":{"items":{"type":"string"},"type":"array"},"valueFrom":{"properties":{"dataOutputName":{"type":"string"}},"required":["dataOutputName"],"type":"object"}},"type":"object"},"type":"array"},"dataOutputs":{"items":{"properties":{"conditions":{"items":{"properties":{"fieldPath":{"type":"string"},"op":{"type":"string"},"value":{"type":"string"},"valueFrom":{"properties":{"fieldPath":{"type":"string"}},"required":["fieldPath"],"type":"object"}},"required":["op"],"type":"object"},"type":"array"},"fieldPath":{"type":"string"},"name":{"type":"string"}},"type":"object"},"type":"array"},"parameterValues":{"items":{"properties":{"name":{"type":"string"},"value":{"anyOf":[{"type":"integer"},{"type":"string"}],"x-kubernetes-int-or-string":true}},"required":["name","value"],"type":"object"},"type":"array"},"revisionName":{"type":"string"},"scopes":{"items":{"properties":{"scopeRef":{"properties":{"apiVersion":{"type":"string"},"kind":{"type":"string"},"name":{"type":"string"},"uid":{"type":"string"}},"required":["apiVersion","kind","name"],"type":"object"}},"required":["scopeRef"],"type":"object"},"type":"array"},"traits":{"items":{"properties":{"dataInputs":{"items":{"properties":{"toFieldPaths":{"items":{"type":"string"},"type":"array"},"valueFrom":{"properties":{"dataOutputName":{"type":"string"}},"required":["dataOutputName"],"type":"object"}},"type":"object"},"type":"array"},"dataOutputs":{"items":{"properties":{"conditions":{"items":{"properties":{"fieldPath":{"type":"string"},"op":{"type":"string"},"value":{"type":"string"},"valueFrom":{"properties":{"fieldPath":{"type":"string"}},"required":["fieldPath"],"type":"object"}},"required":["op"],"type":"object"},"type":"array"},"fieldPath":{"type":"string"},"name":{"type":"string"}},"type":"object"},"type":"array"},"trait":{"oneOf":[{"description":"IngressTrait specifies the ingress traits API.","properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","enum":["IngressTrait"],"type":"string"},"metadata":{"type":"object"},"spec":{"description":"IngressTraitSpec specifies the desired state of an ingress trait.","properties":{"rules":{"description":"A list of ingress rules for an ingress trait.","items":{"description":"IngressRule specifies a rule for an ingress trait.","properties":{"destination":{"description":"The destination host and port for the ingress paths.","properties":{"host":{"description":"Destination host.","type":"string"},"httpCookie":{"description":"Session affinity cookie.","properties":{"name":{"description":"The name of the HTTP cookie.","type":"string"},"path":{"description":"The path of the HTTP cookie.","type":"string"},"ttl":{"description":"The lifetime of the HTTP cookie (in seconds).","format":"int64","type":"integer"}},"type":"object"},"port":{"description":"Destination port.","format":"int32","type":"integer"}},"type":"object"},"hosts":{"description":"One or more hosts exposed by the ingress trait. Wildcard hosts or hosts that are empty are filtered out. If there are no valid hosts provided, then a DNS host name is automatically generated and used.","items":{"type":"string"},"type":"array"},"paths":{"description":"The paths to be exposed for an ingress trait.","items":{"description":"IngressPath specifies a specific path to be exposed for an ingress trait.","properties":{"authorizationPolicy":{"description":"Defines the set of rules for authorizing a request.","properties":{"rules":{"description":"Rules are used to match requests from request principals to specific paths given an optional list of conditions.","items":{"description":"AuthorizationRule matches requests from a list of request principals that access a specific path subject to a list of conditions.","properties":{"from":{"description":"Specifies the request principals for access to a request. An asterisk (*) will match when the value is not empty, for example, if any request principal is found in the request.","properties":{"requestPrincipals":{"description":"Specifies the request principals for access to a request.","items":{"type":"string"},"type":"array"}},"type":"object"},"when":{"description":"Specifies a list of additional conditions for access to a request.","items":{"description":"AuthorizationRuleCondition provides additional required attributes for authorization.","properties":{"key":{"description":"The name of a request attribute.","type":"string"},"values":{"description":"A list of allowed values for the attribute.","items":{"type":"string"},"type":"array"}},"type":"object"},"type":"array"}},"type":"object"},"type":"array"}},"type":"object"},"path":{"description":"If no path is provided, then it defaults to forward slash (`/`).","type":"string"},"pathType":{"description":"Path type values are case-sensitive and formatted as follows: <ul><li>`exact`: exact string match</li><li>`prefix`: prefix-based match</li><li>`regex`: regex-based match</li></ul> Defaults to `prefix` if `path` specified is `/`; otherwise, defaults to `exact`.","type":"string"}},"type":"object"},"type":"array"}},"type":"object"},"type":"array"},"tls":{"description":"The security parameters for an ingress trait. This is required only if specific hosts are given in an [IngressRule](#oam.verrazzano.io/v1alpha1.IngressRule).","properties":{"secretName":{"description":"The name of a secret containing the certificate securing the transport.  The specification of a secret here implies that a certificate was created for specific hosts, as specified in an [IngressRule](#oam.verrazzano.io/v1alpha1.IngressRule).","type":"string"}},"type":"object"},"workloadRef":{"description":"The WorkloadReference of the workload to which this trait applies. This value is populated by the OAM runtime when an ApplicationConfiguration resource is processed.  When the ApplicationConfiguration is processed, a trait and a workload resource are created from the content of the ApplicationConfiguration. The WorkloadReference is provided in the trait by OAM to ensure that the trait controller can find the workload associated with the component containing the trait within the original ApplicationConfiguration.","properties":{"apiVersion":{"description":"APIVersion of the referenced object.","type":"string"},"kind":{"description":"Kind of the referenced object.","type":"string"},"name":{"description":"Name of the referenced object.","type":"string"},"uid":{"description":"UID of the referenced object.","type":"string"}},"required":["apiVersion","kind","name"],"type":"object"}},"required":["workloadRef"],"type":"object"},"status":{"description":"The observed state of an ingress trait and related resources.","properties":{"conditions":{"description":"Conditions of the resource.","items":{"description":"A Condition that may apply to a resource.","properties":{"lastTransitionTime":{"description":"LastTransitionTime is the last time this condition transitioned from one status to another.","format":"date-time","type":"string"},"message":{"description":"A Message containing details about this condition's last transition from one status to another, if any.","type":"string"},"reason":{"description":"A Reason for this condition's last transition from one status to another.","type":"string"},"status":{"description":"Status of this condition; is it currently True, False, or Unknown?","type":"string"},"type":{"description":"Type of this condition. At most one of each condition type may apply to a resource at any point in time.","type":"string"}},"required":["lastTransitionTime","reason","status","type"],"type":"object"},"type":"array"},"resources":{"description":"The resources managed by this ingress trait.","items":{"description":"A TypedReference refers to an object by Name, Kind, and APIVersion. It is commonly used to reference cluster-scoped objects or objects where the namespace is already known.","properties":{"apiVersion":{"description":"APIVersion of the referenced object.","type":"string"},"kind":{"description":"Kind of the referenced object.","type":"string"},"name":{"description":"Name of the referenced object.","type":"string"},"uid":{"description":"UID of the referenced object.","type":"string"}},"required":["apiVersion","kind","name"],"type":"object"},"type":"array"}},"type":"object"}},"type":"object"},{"description":"LoggingTrait specifies the logging traits API.","properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","enum":["LoggingTrait"],"type":"string"},"metadata":{"type":"object"},"spec":{"description":"LoggingTraitSpec specifies the desired state of a logging trait.","properties":{"imagePullPolicy":{"description":"The optional image pull policy for the Fluentd image provided by the user.","type":"string"},"loggingConfig":{"description":"The configuration provided by the user for the Fluentd configuration that consists of fluentd.conf: `<source>\\n ... and so on ...\\n`.","type":"string"},"loggingImage":{"description":"The name of the custom Fluentd image.","type":"string"},"workloadRef":{"description":"The WorkloadReference of the workload to which this trait applies. This value is populated by the OAM runtime when an ApplicationConfiguration resource is processed.  When the ApplicationConfiguration is processed, a trait and a workload resource are created from the content of the ApplicationConfiguration. The WorkloadReference is provided in the trait by OAM to ensure that the trait controller can find the workload associated with the component containing the trait within the original ApplicationConfiguration.","properties":{"apiVersion":{"description":"APIVersion of the referenced object.","type":"string"},"kind":{"description":"Kind of the referenced object.","type":"string"},"name":{"description":"Name of the referenced object.","type":"string"},"uid":{"description":"UID of the referenced object.","type":"string"}},"required":["apiVersion","kind","name"],"type":"object"}},"required":["workloadRef"],"type":"object"},"status":{"description":"The observed state of a logging trait and related resources.","properties":{"conditions":{"description":"Conditions of the resource.","items":{"description":"A Condition that may apply to a resource.","properties":{"lastTransitionTime":{"description":"LastTransitionTime is the last time this condition transitioned from one status to another.","format":"date-time","type":"string"},"message":{"description":"A Message containing details about this condition's last transition from one status to another, if any.","type":"string"},"reason":{"description":"A Reason for this condition's last transition from one status to another.","type":"string"},"status":{"description":"Status of this condition; is it currently True, False, or Unknown?","type":"string"},"type":{"description":"Type of this condition. At most one of each condition type may apply to a resource at any point in time.","type":"string"}},"required":["lastTransitionTime","reason","status","type"],"type":"object"},"type":"array"},"resources":{"description":"The resources managed by this logging trait.","items":{"description":"A TypedReference refers to an object by Name, Kind, and APIVersion. It is commonly used to reference cluster-scoped objects or objects where the namespace is already known.","properties":{"apiVersion":{"description":"APIVersion of the referenced object.","type":"string"},"kind":{"description":"Kind of the referenced object.","type":"string"},"name":{"description":"Name of the referenced object.","type":"string"},"uid":{"description":"UID of the referenced object.","type":"string"}},"required":["apiVersion","kind","name"],"type":"object"},"type":"array"}},"type":"object"}},"type":"object"},{"description":"A ManualScalerTrait determines how many replicas a workload should have.","properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","enum":["ManualScalerTrait"],"type":"string"},"metadata":{"type":"object"},"spec":{"description":"A ManualScalerTraitSpec defines the desired state of a ManualScalerTrait.","properties":{"replicaCount":{"description":"ReplicaCount of the workload this trait applies to.","format":"int32","type":"integer"},"workloadRef":{"description":"WorkloadReference to the workload this trait applies to.","properties":{"apiVersion":{"description":"APIVersion of the referenced object.","type":"string"},"kind":{"description":"Kind of the referenced object.","type":"string"},"name":{"description":"Name of the referenced object.","type":"string"},"uid":{"description":"UID of the referenced object.","type":"string"}},"required":["apiVersion","kind","name"],"type":"object"}},"required":["replicaCount","workloadRef"],"type":"object"},"status":{"description":"A ManualScalerTraitStatus represents the observed state of a ManualScalerTrait.","properties":{"conditions":{"description":"Conditions of the resource.","items":{"description":"A Condition that may apply to a resource.","properties":{"lastTransitionTime":{"description":"LastTransitionTime is the last time this condition transitioned from one status to another.","format":"date-time","type":"string"},"message":{"description":"A Message containing details about this condition's last transition from one status to another, if any.","type":"string"},"reason":{"description":"A Reason for this condition's last transition from one status to another.","type":"string"},"status":{"description":"Status of this condition; is it currently True, False, or Unknown?","type":"string"},"type":{"description":"Type of this condition. At most one of each condition type may apply to a resource at any point in time.","type":"string"}},"required":["lastTransitionTime","reason","status","type"],"type":"object"},"type":"array"}},"type":"object"}},"type":"object"},{"description":"MetricsTrait specifies the metrics trait API.","properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","enum":["MetricsTrait"],"type":"string"},"metadata":{"type":"object"},"spec":{"description":"MetricsTraitSpec specifies the desired state of a metrics trait.","properties":{"enabled":{"description":"Specifies whether metrics collection is enabled. Defaults to `true`.","type":"boolean"},"path":{"description":"The HTTP path for the related metrics endpoint. Defaults to `/metrics`.","type":"string"},"port":{"description":"The HTTP port for the related metrics trait. Defaults to `8080`.","type":"integer"},"ports":{"description":"The HTTP endpoints for the related metrics.","items":{"description":"PortSpec defines an HTTP port and path combination.","properties":{"path":{"description":"The HTTP path for the related metrics endpoint. Defaults to `/metrics`.","type":"string"},"port":{"description":"The HTTP port for the related metrics trait. Defaults to `8080`.","type":"integer"}},"type":"object"},"type":"array"},"scraper":{"description":"The Prometheus deployment used to scrape the related metrics endpoints. By default, the Verrazzano-supplied Prometheus component is used to scrape the endpoint.","type":"string"},"secret":{"description":"The name of an opaque secret (for example, `username` and `password`) within the workload’s namespace for metrics endpoint access.","type":"string"},"workloadRef":{"description":"The WorkloadReference of the workload to which this trait applies. This value is populated by the OAM runtime when an ApplicationConfiguration resource is processed.  When the ApplicationConfiguration is processed, a trait and a workload resource are created from the content of the ApplicationConfiguration. The WorkloadReference is provided in the trait by OAM to ensure that the trait controller can find the workload associated with the component containing the trait within the original ApplicationConfiguration.","properties":{"apiVersion":{"description":"APIVersion of the referenced object.","type":"string"},"kind":{"description":"Kind of the referenced object.","type":"string"},"name":{"description":"Name of the referenced object.","type":"string"},"uid":{"description":"UID of the referenced object.","type":"string"}},"required":["apiVersion","kind","name"],"type":"object"}},"required":["workloadRef"],"type":"object"},"status":{"description":"The observed state of a metrics trait and related resources.","properties":{"conditions":{"description":"Conditions of the resource.","items":{"description":"A Condition that may apply to a resource.","properties":{"lastTransitionTime":{"description":"LastTransitionTime is the last time this condition transitioned from one status to another.","format":"date-time","type":"string"},"message":{"description":"A Message containing details about this condition's last transition from one status to another, if any.","type":"string"},"reason":{"description":"A Reason for this condition's last transition from one status to another.","type":"string"},"status":{"description":"Status of this condition; is it currently True, False, or Unknown?","type":"string"},"type":{"description":"Type of this condition. At most one of each condition type may apply to a resource at any point in time.","type":"string"}},"required":["lastTransitionTime","reason","status","type"],"type":"object"},"type":"array"},"resources":{"description":"Related resources affected by this metrics trait.","items":{"description":"QualifiedResourceRelation identifies a specific related resource.","properties":{"apiversion":{"description":"API version of the related resource.","type":"string"},"kind":{"description":"Kind of the related resource.","type":"string"},"name":{"description":"Name of the related resource.","type":"string"},"namespace":{"description":"Namespace of the related resource.","type":"string"},"role":{"description":"Role of the related resource, for example, `Deployment`.","type":"string"}},"required":["apiversion","kind","name","namespace","role"],"type":"object"},"type":"array"}},"type":"object"}},"type":"object"}],"type":"object","x-kubernetes-embedded-resource":true,"x-kubernetes-preserve-unknown-fields":true}},"required":["trait"],"type":"object"},"type":"array"}},"type":"object"},"type":"array"}},"required":["components"],"type":"object"},"status":{"properties":{"conditions":{"items":{"properties":{"lastTransitionTime":{"format":"date-time","type":"string"},"message":{"type":"string"},"reason":{"type":"string"},"status":{"type":"string"},"type":{"type":"string"}},"required":["lastTransitionTime","reason","status","type"],"type":"object"},"type":"array"},"dependency":{"properties":{"unsatisfied":{"items":{"properties":{"from":{"properties":{"apiVersion":{"type":"string"},"fieldPath":{"type":"string"},"kind":{"type":"string"},"name":{"type":"string"},"uid":{"type":"string"}},"required":["apiVersion","kind","name"],"type":"object"},"reason":{"type":"string"},"to":{"properties":{"apiVersion":{"type":"string"},"fieldPaths":{"items":{"type":"string"},"type":"array"},"kind":{"type":"string"},"name":{"type":"string"},"uid":{"type":"string"}},"required":["apiVersion","kind","name"],"type":"object"}},"required":["from","reason","to"],"type":"object"},"type":"array"}},"type":"object"},"historyWorkloads":{"items":{"properties":{"revision":{"type":"string"},"workloadRef":{"properties":{"apiVersion":{"type":"string"},"kind":{"type":"string"},"name":{"type":"string"},"uid":{"type":"string"}},"required":["apiVersion","kind","name"],"type":"object"}},"type":"object"},"type":"array"},"observedGeneration":{"format":"int64","type":"integer"},"status":{"type":"string"},"workloads":{"items":{"properties":{"componentName":{"type":"string"},"componentRevisionName":{"type":"string"},"scopes":{"items":{"properties":{"scopeRef":{"properties":{"apiVersion":{"type":"string"},"kind":{"type":"string"},"name":{"type":"string"},"uid":{"type":"string"}},"required":["apiVersion","kind","name"],"type":"object"},"status":{"type":"string"}},"required":["scopeRef"],"type":"object"},"type":"array"},"status":{"type":"string"},"traits":{"items":{"properties":{"message":{"type":"string"},"status":{"type":"string"},"traitRef":{"properties":{"apiVersion":{"type":"string"},"kind":{"type":"string"},"name":{"type":"string"},"uid":{"type":"string"}},"required":["apiVersion","kind","name"],"type":"object"}},"required":["traitRef"],"type":"object"},"type":"array"},"workloadRef":{"properties":{"apiVersion":{"type":"string"},"kind":{"type":"string"},"name":{"type":"string"},"uid":{"type":"string"}},"required":["apiVersion","kind","name"],"type":"object"}},"type":"object"},"type":"array"}},"type":"object"}},"type":"object"}}
