<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="generator" content="Relearn 8.3.0">
    <meta name="description" content="This section covers advanced features to target your WDT model to a specific environment.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Target environments :: WebLogic Deploy Tooling">
    <meta name="twitter:description" content="This section covers advanced features to target your WDT model to a specific environment.">
    <meta property="og:url" content="https://oracle.github.io/weblogic-deploy-tooling/userguide/target_env/index.html">
    <meta property="og:site_name" content="WebLogic Deploy Tooling">
    <meta property="og:title" content="Target environments :: WebLogic Deploy Tooling">
    <meta property="og:description" content="This section covers advanced features to target your WDT model to a specific environment.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="User Guide">
    <meta property="article:published_time" content="2019-02-23T17:19:24-05:00">
    <meta property="article:modified_time" content="2019-02-23T17:19:24-05:00">
    <meta itemprop="name" content="Target environments :: WebLogic Deploy Tooling">
    <meta itemprop="description" content="This section covers advanced features to target your WDT model to a specific environment.">
    <meta itemprop="datePublished" content="2019-02-23T17:19:24-05:00">
    <meta itemprop="dateModified" content="2019-02-23T17:19:24-05:00">
    <meta itemprop="wordCount" content="1847">
    <title>Target environments :: WebLogic Deploy Tooling</title>
    <link href="/weblogic-deploy-tooling/images/logo.png?1771646010" rel="icon" type="image/png">
    <link href="/weblogic-deploy-tooling/css/auto-complete/auto-complete.min.css?1771646010" rel="stylesheet">
    <script src="/weblogic-deploy-tooling/js/auto-complete/auto-complete.min.js?1771646010" defer></script>
    <script src="/weblogic-deploy-tooling/js/search-lunr.min.js?1771646010" defer></script>
    <script src="/weblogic-deploy-tooling/js/search.min.js?1771646010" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/weblogic-deploy-tooling/searchindex.en.js?1771646010";
    </script>
    <script src="/weblogic-deploy-tooling/js/lunr/lunr.min.js?1771646010" defer></script>
    <script src="/weblogic-deploy-tooling/js/lunr/lunr.stemmer.support.min.js?1771646010" defer></script>
    <script src="/weblogic-deploy-tooling/js/lunr/lunr.multi.min.js?1771646010" defer></script>
    <script src="/weblogic-deploy-tooling/js/lunr/lunr.en.min.js?1771646010" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/weblogic-deploy-tooling/fonts/fontawesome/css/fontawesome-all.min.css?1771646010" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/weblogic-deploy-tooling/fonts/fontawesome/css/fontawesome-all.min.css?1771646010" rel="stylesheet"></noscript>
    <link href="/weblogic-deploy-tooling/css/perfect-scrollbar/perfect-scrollbar.min.css?1771646010" rel="stylesheet">
    <link href="/weblogic-deploy-tooling/css/theme.min.css?1771646010" rel="stylesheet">
    <link href="/weblogic-deploy-tooling/css/format-html.min.css?1771646010" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/userguide\/target_env\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/oracle.github.io\/weblogic-deploy-tooling';
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'learn' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
  </head>
  <body class="mobile-support html" data-url="/weblogic-deploy-tooling/userguide/target_env/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#contents">Contents</a></li>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#specifying-a-target-environment">Specifying a target environment</a></li>
        <li><a href="#pre-configured-target-environments">Pre-configured target environments</a></li>
        <li><a href="#using-secret-credentials-in-the-model">Using secret credentials in the model</a></li>
        <li><a href="#merging-content-from-the-wdt-model">Merging content from the WDT model</a></li>
        <li><a href="#target-environment-configuration-files">Target environment configuration files</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/weblogic-deploy-tooling/index.html"><span itemprop="name">WebLogic Deploy Tooling</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/weblogic-deploy-tooling/userguide/index.html"><span itemprop="name">User Guide</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Target environments</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/weblogic-deploy-tooling/userguide/tools/verify_ssh/index.html" title="Verify SSH Tool (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/weblogic-deploy-tooling/userguide/database/connect-db/index.html" title="Connect to a database (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable userguide" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>



<h1 id="target-environments">Target environments</h1>



<h3 id="contents">Contents<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<ul>
<li>

<a href="#overview"
   
   >
Overview
</a>
</li>
<li>

<a href="#specifying-a-target-environment"
   
   >
Specifying a target environment
</a>
</li>
<li>

<a href="#pre-configured-target-environments"
   
   >
Pre-configured target environments
</a>
</li>
<li>

<a href="#using-secret-credentials-in-the-model"
   
   >
Using secret credentials in the model
</a>
</li>
<li>

<a href="#merging-content-from-the-wdt-model"
   
   >
Merging content from the WDT model
</a>
</li>
<li>

<a href="#target-environment-configuration-files"
   
   >
Target configuration files
</a>
</li>
</ul>
<h3 id="overview">Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>The 

<a href="/weblogic-deploy-tooling/userguide/tools/discover/"
   
   >
Discover Domain
</a>
 and 

<a href="/weblogic-deploy-tooling/userguide/tools/prepare/"
   
   >
Prepare Model
</a>
 Tools allow you to customize the model and other files produced to be compatible with a specific target environment. Options for a target environment may include:</p>
<ul>
<li>Using model tokens for some attributes in the model. For more details, see 

<a href="/weblogic-deploy-tooling/concepts/model/#model-tokens"
   
   >
Model tokens
</a>
.</li>
<li>Using Kubernetes secrets for credentials in the model. For more details, see 

<a href="#using-secret-credentials-in-the-model"
   
   >
Using secret credentials in the model
</a>
.</li>
<li>Applying filters to the model. For more details, see 

<a href="/weblogic-deploy-tooling/userguide/tools-config/model_filters/"
   
   >
Model filters
</a>
.</li>
<li>Creating additional configuration files for the target system.</li>
</ul>
<h3 id="specifying-a-target-environment">Specifying a target environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Each tool specifies a target environment using the command-line argument <code>-target &lt;target-name&gt;</code>, where <code>&lt;target-name&gt;</code> refers to a pre-configured target environment, or a user-defined environment. In addition, the <code>-output_dir &lt;output-directory&gt;</code> argument specifies where the files for the target environment will be stored.</p>
<p>This command line shows how you can use these arguments with the Discover Domain Tool:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span> <span style="color:#ae81ff">$ $WLSDEPLOY_HOME/bin/discoverDomain.sh ... -target k8s -output_dir /etc/files</span></span></span></code></pre></div>
<p>This example would apply the <code>k8s</code> target type to the discovery result, and place those files in <code>/etc/files</code>.</p>
<p>If a variable file is specified on the tool&rsquo;s command line using the <code>-variable_file</code> argument, any injected variables will be added to that file. If no variable file is specified, injected variables will be written to the file <code>&lt;output-directory&gt;/&lt;target_name&gt;_variable.properties</code>.</p>
<h3 id="pre-configured-target-environments">Pre-configured target environments<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>These target environment configurations are included in the WebLogic Deploy Tooling installation.</p>
<h4 id="the-weblogic-kubernetes-operator-targets">The WebLogic Kubernetes Operator targets<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>You can use these targets to customize the model and create a domain resource file for use with WebLogic Kubernetes Operator (WKO). There are three targets for specific 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/choosing-a-model/"
   
   
target="_blank" rel="noopener noreferrer"
>
domain home source types
</a>
:</p>
<ul>
<li><code>wko</code> and <code>wko&lt;version&gt;</code> for 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/model-in-image/"
   
   
target="_blank" rel="noopener noreferrer"
>
Model in Image
</a>
 deployments</li>
<li><code>wko-dii</code> and <code>wko&lt;version&gt;-dii</code> for Domain in Image deployments</li>
<li><code>wko-pv</code>and <code>wko&lt;version&gt;-pv</code> for Domain in PV deployments</li>
</ul>
<p>The value of <code>&lt;version&gt;</code> corresponds to a major version of WKO. For example the target <code>wko4-dii</code> would customize the model for a Domain in Image deployment for WKO version 4.0.0 and later.</p>
<p>Targets without a version number, such as <code>wko-dii</code>, will customize the model for the current version of WKO. This association may change as new versions of WKO are released, so it is recommended to use target names with the intended WKO version.</p>
<p>Each of these targets provides this additional processing:</p>
<ul>
<li>The <code>wko_filter</code> filter will be applied to remove model elements that are not compatible with the Kubernetes environment, and adjust some attribute values</li>
<li>Variables will be injected into the model for port, host, and URL attributes</li>
<li><code>lax</code> validation will be applied for the resulting model</li>
<li>An additional Kubernetes resource file, <code>wko-domain.yaml</code>, will be produced, with cluster and naming information derived from the model</li>
</ul>
<p>In addition, the <code>wko</code> target will replace credentials in the model with references to Kubernetes secrets, and produce a script to create those secrets. The <code>wko-dii</code> and <code>wko-pv</code> targets will replace credentials in the model with variable references.</p>
<h4 id="generic-kubernetes-target">Generic Kubernetes target<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>You can apply this target environment by providing the command-line argument <code>-target k8s</code>. It will provide this additional processing:</p>
<ul>
<li>The <code>k8s_filter</code> filter will be applied to remove model elements that are not compatible with the Kubernetes environment, and adjust some attribute values</li>
<li>Variables will be injected into the model for port, host, and URL attributes</li>
<li><code>lax</code> validation will be applied for the resulting model</li>
<li>Credentials in the model will be replaced with references to Kubernetes secrets, and a script to create those secrets will be produced</li>
</ul>
<h3 id="using-secret-credentials-in-the-model">Using secret credentials in the model<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>If a target environment is configured to use Kubernetes secrets for credential attribute values, each of those values is replaced with a token using the format <code>@@SECRET:@@ENV:DOMAIN_UID@@&lt;secret-suffix&gt;:&lt;key&gt;</code>. For example:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">PasswordEncrypted</span>: <span style="color:#e6db74">&#39;@@SECRET:@@ENV:DOMAIN_UID@@-jdbc-generic1:password@@&#39;</span></span></span></code></pre></div>
<p>When a domain is created or updated using a model with these tokens, the environment variable <code>DOMAIN_UID</code> should be set to the domain&rsquo;s UID, and secrets with corresponding names should have been created. For more details about using secret tokens, see 

<a href="/weblogic-deploy-tooling/concepts/model/#model-tokens"
   
   >
Model Tokens
</a>
.</p>
<p>For some target environments, the WebLogic admin credentials use a variation of this token format. For example:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">domainInfo</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">AdminUserName</span>: <span style="color:#e6db74">&#39;@@SECRET:__weblogic-credentials__:username@@&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">AdminPassword</span>: <span style="color:#e6db74">&#39;@@SECRET:__weblogic-credentials__:password@@&#39;</span></span></span></code></pre></div>
<p>In this case, the token <code>__weblogic-credentials__</code> allows these attributes to reference secrets in a specific location. The <code>WDT_MODEL_SECRETS_NAME_DIR_PAIRS</code> environment variable should be set to associate <code>__weblogic-credentials__</code> to this location. For example:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>WDT_MODEL_SECRETS_NAME_DIR_PAIRS<span style="color:#f92672">=</span>__weblogic-credentials__<span style="color:#f92672">=</span>/etc/my-secrets</span></span></code></pre></div>
<p>For more details about using the <code>WDT_MODEL_SECRETS_NAME_DIR_PAIRS</code> environment variable, see 

<a href="/weblogic-deploy-tooling/concepts/model/#model-tokens"
   
   >
Model Tokens
</a>
 .</p>
<p>In WebLogic Kubernetes Operator 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/model-in-image/"
   
   
target="_blank" rel="noopener noreferrer"
>
Model in Image
</a>
 environments, the environment variable <code>DOMAIN_UID</code> is automatically set from the value in the domain resource file. The variable <code>WDT_MODEL_SECRETS_NAME_DIR_PAIRS</code> is automatically set to the directory containing WebLogic admin credentials.</p>
<h4 id="the-create-secrets-script">The create secrets script<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>For target environments that use Kubernetes secret tokens, a shell script is created to generate the required secrets. The script is named <code>create_k8s_secrets.sh</code>, and is created in the target output directory. The script has commands to create each secret, for example:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Update &lt;user&gt; and &lt;password&gt; for weblogic-credentials</span>
</span></span><span style="display:flex;"><span>create_paired_k8s_secret weblogic-credentials &lt;user&gt; &lt;password&gt;</span></span></code></pre></div>
<p>The script should be updated with correct <code>&lt;user&gt;</code> and <code>&lt;password&gt;</code> values as required. It may be necessary to change the <code>NAMESPACE</code> and <code>DOMAIN_UID</code> variables at the top of the script if they are different in the target environment.</p>
<p>The script performs a check to determine if any generated secret names are more than 63 characters in length, because that will prevent them from being mounted correctly in the Kubernetes environment. If any secret names exceed this limit, they will need to be shortened in this script, in the model files, and in the Kubernetes resource file. Each shortened name should be distinct from other secret names.</p>
<h3 id="merging-content-from-the-wdt-model">Merging content from the WDT model<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>When a Kubernetes custom resource definition (CRD) file is created for a target environment, content from the corresponding section of the WDT model will be merged into the resulting output, if that section is present.</p>
<p>For example, when the <code>-target wko</code> option is used, content from the <code>kubernetes</code> section of the WDT model will be merged into the resulting CRD, if that section is present. For example, you can define this section in the model:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">kubernetes</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">domainHome</span>: <span style="color:#ae81ff">/etc/domainHome</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">my-image</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">clusters</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">clusterName</span>: <span style="color:#ae81ff">my-cluster</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">clusterName</span>: <span style="color:#ae81ff">other-cluster</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">6</span></span></span></code></pre></div>
<p>These fields will override the values in the output file, and the file would be rewritten with the revised values. List values in the model will be combined with existing values in the output file. For example, if <code>my-cluster</code> was in the original output file, the model content for <code>my-cluster</code> would be merged with it, overriding the <code>replicas</code> value. If <code>my-cluster</code> was not in the original output file, it would be added to the list of clusters.</p>
<p>When creating a resource file for WebLogic Kubernetes Operator version 4.0.0 and later, the <code>kubernetes</code> section of the model has to be structured differently. This is because there are multiple documents in the resource file for those versions. This example uses <code>domain</code> and <code>cluster</code> folders that will merge with the corresponding documents in the resource file:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">kubernetes</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">domain</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">domainHome</span>: <span style="color:#ae81ff">/etc/domainHome</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">image</span>: <span style="color:#ae81ff">my-image</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">clusters</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">clusterName</span>: <span style="color:#ae81ff">my-cluster</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">clusterName</span>: <span style="color:#ae81ff">other-cluster</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">replicas</span>: <span style="color:#ae81ff">6</span></span></span></code></pre></div>
<h3 id="target-environment-configuration-files">Target environment configuration files<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>A target environment is configured in a JSON file at this location:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>$WLSDEPLOY_HOME/lib/targets/&lt;target-name&gt;/target.json</code></pre></div>
<p>The <code>&lt;target-name&gt;</code> value corresponds to the value of the <code>-target</code> argument on the tool&rsquo;s command line. The WLS installation includes pre-defined targets for these environments:</p>
<ul>
<li>

<a href="#the-weblogic-kubernetes-operator-targets"
   
   >
WebLogic Kubernetes Operator
</a>
</li>
<li>

<a href="#generic-kubernetes-target"
   
   >
Kubernetes
</a>
</li>
</ul>
<p>You can define a new or extended target environment with a new <code>target-name</code> in the above location, or using a 

<a href="/weblogic-deploy-tooling/userguide/tools-config/custom_config/"
   
   >
Custom configuration
</a>
 directory, such as <code>$WDT_CUSTOM_CONFIG/target/&lt;my-target-name&gt;/target.json</code>.</p>
<p>You can customize existing template files for specific environments. The recommended method is to copy the original template to a custom configuration directory as described above, such as <code>$WDT_CUSTOM_CONFIG/target/&lt;target-name&gt;/model.yaml</code>. The copied file can then be edited as needed, while maintaining the original for reference.</p>
<p>Here is an example of a target environment file:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>{
    &#34;model_filters&#34; : {
        &#34;discover&#34;: [
            { &#34;name&#34;: &#34;wko_prep&#34;, &#34;path&#34;: &#34;@@TARGET_CONFIG_DIR@@/wko_operator_filter.py&#34; },
            { &#34;id&#34;: &#34;wko_filter&#34; }
        ]
    },
    &#34;variable_injectors&#34; : {&#34;PORT&#34;: {},&#34;HOST&#34;: {},&#34;URL&#34;: {}},
    &#34;validation_method&#34; : &#34;lax&#34;,
    &#34;credentials_method&#34; : &#34;secrets&#34;,
    &#34;exclude_domain_bin_contents&#34;: true,
    &#34;wls_credentials_name&#34; : &#34;__weblogic-credentials__&#34;,
    &#34;use_persistent_volume&#34; : true,
    &#34;additional_secrets&#34;: &#34;runtime-encryption-secret&#34;,
    &#34;additional_output&#34; : &#34;wko-domain.yaml&#34;
}</code></pre></div>
<p>Each of the fields in this example is optional, and you can customize them.</p>
<h4 id="model_filters"><code>model_filters</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>This field specifies the filters to be applied to the resulting model. This follows the same format and rules as the 

<a href="/weblogic-deploy-tooling/userguide/tools-config/model_filters/"
   
   >
Model filters
</a>
 configuration. The <code>discover</code> type should always be used here.</p>
<p>You can use the <code>@@TARGET_CONFIG_DIR@@</code> token to indicate that the specified filter is in the same directory as the target configuration file.</p>
<h4 id="variable_injectors"><code>variable_injectors</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>This field specifies the variable injectors to be applied to the resulting model. This follows the same format and rules as the 

<a href="/weblogic-deploy-tooling/userguide/tools-config/variable_injectors/"
   
   >
Variable injectors
</a>
 configuration.</p>
<h4 id="validation_method"><code>validation_method</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>You can use this field to set the validation level for the resulting model. Only the value <code>lax</code>is currently supported. With <code>lax</code> validation, variables and Kubernetes secrets referenced in the resulting model do not need to be available when the model is created.</p>
<h4 id="credentials_method"><code>credentials_method</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>This field specifies how credentials in the model should be handled. There are two values available:</p>
<ul>
<li><code>secrets</code> - the credentials in the model are replaced with references to Kubernetes secrets, and a UNIX script to create those secrets is produced.</li>
<li><code>config_override_secrets</code> - the credentials in the model are replaced with placeholder values, such as <code>password1</code>, and a UNIX script to create corresponding Kubernetes secrets is produced.</li>
</ul>
<p>In both these cases, the script to create the Kubernetes secrets is written to <code>&lt;output-directory&gt;/create_k8s_secrets.sh</code>. You will need to update this script with credential values before executing</p>
<h4 id="exclude_domain_bin_contents"><code>exclude_domain_bin_contents</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>This field specifies how the domain&rsquo;s <code>bin</code> directory contents should be handled.  If set to <code>true</code>, then discovery will skip over the domain&rsquo;s <code>bin</code> directory resulting in a model and archive file without any references to any scripts that might typically be collected (for example, <code>setUserOverrides.sh</code>).</p>
<h4 id="wls_credentials_name"><code>wls_credentials_name</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>This field specifies a name for use with the WDT_MODEL_SECRETS_NAME_DIR_PAIRS environment variable to identify administration credential Secrets for the domain. This is useful when those Secrets are stored in a directory that does not follow the <code>&lt;directory&gt;/&lt;name&gt;/&lt;key&gt;</code> convention. For more information about using the WDT_MODEL_SECRETS_NAME_DIR_PAIRS environment variable, see 

<a href="/weblogic-deploy-tooling/concepts/model/#model-tokens"
   
   >
Model tokens
</a>
.</p>
<h4 id="use_persistent_volume"><code>use_persistent_volume</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>This field specifies if the domain is to be created for the Domain in PV 

<a href="https://oracle.github.io/weblogic-kubernetes-operator/managing-domains/choosing-a-model/"
   
   
target="_blank" rel="noopener noreferrer"
>
domain home source type
</a>
. If set to <code>true</code>, volume information will be added to the Kubernetes resource file that is generated.</p>
<h4 id="additional_secrets"><code>additional_secrets</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>This field specifies a comma-separated list of secret types that are to be included in the Kubernetes resource file and the create secrets script. There is one secret type available:</p>
<ul>
<li><code>runtime-encryption-secret</code> - this will add a <code>runtimeEncryptionSecret</code> attribute to the Kubernetes resource file with the value <code>&lt;DOMAIN_UID&gt;-runtime-encryption-secret</code>, and that secret name will be added to the 

<a href="#the-create-secrets-script"
   
   >
create secrets script
</a>
.</li>
</ul>
<h4 id="additional_output"><code>additional_output</code><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<p>You can use this field to create additional output for use in the target environment. The value is a comma-separated list of template files in the <code>$WLSDEPLOY_HOME/lib/targets/templates</code> directory. These templates are populated with information derived from the model, and written to a file with the same name in the specified output directory.</p>
<p><strong>Note: Prior to release 2.0.1, template files were stored in the <code>$WLSDEPLOY_HOME/lib/targets/&lt;target-name&gt;</code> directory.</strong></p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
 
 <a id="logo" href="https://oracle.github.io/weblogic-deploy-tooling/">
   <img src="https://oracle.github.io/weblogic-deploy-tooling//images/logo.png" height="90"><br/>
   WebLogic Deploy Tooling
 </a>

        </div>
        <search><form action="/weblogic-deploy-tooling/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-url="/weblogic-deploy-tooling/index.html"><a class="padding" href="/weblogic-deploy-tooling/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="/weblogic-deploy-tooling/concepts/index.html"><a class="padding" href="/weblogic-deploy-tooling/concepts/index.html"><b> </b>Concepts</a><ul id="R-subsections-90941c33b457a4d12ffdbc0aa62a266d" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-url="/weblogic-deploy-tooling/userguide/index.html"><a class="padding" href="/weblogic-deploy-tooling/userguide/index.html"><b> </b>User Guide</a><ul id="R-subsections-74b4df3a3d9365853f09e9f1dfe7bbba" class="collapsible-menu">
            <li class="" data-nav-url="/weblogic-deploy-tooling/userguide/install/index.html"><a class="padding" href="/weblogic-deploy-tooling/userguide/install/index.html">Install WDT</a></li>
            <li class="alwaysopen " data-nav-url="/weblogic-deploy-tooling/userguide/tools/index.html"><a class="padding" href="/weblogic-deploy-tooling/userguide/tools/index.html"><b> </b>WDT Tools</a><ul id="R-subsections-7b3bc9511e17e6cce72c059be01d1c1d" class="collapsible-menu"></ul></li>
            <li class="active " data-nav-url="/weblogic-deploy-tooling/userguide/target_env/index.html"><a class="padding" href="/weblogic-deploy-tooling/userguide/target_env/index.html">Target environments</a></li>
            <li class="" data-nav-url="/weblogic-deploy-tooling/userguide/database/connect-db/index.html"><a class="padding" href="/weblogic-deploy-tooling/userguide/database/connect-db/index.html">Connect to a database</a></li>
            <li class="alwaysopen " data-nav-url="/weblogic-deploy-tooling/userguide/tools-config/index.html"><a class="padding" href="/weblogic-deploy-tooling/userguide/tools-config/index.html">Tools configuration</a><ul id="R-subsections-c4669204bf8f7b2300872f9f21388cb1" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="/weblogic-deploy-tooling/userguide/limitations/limitations/index.html"><a class="padding" href="/weblogic-deploy-tooling/userguide/limitations/limitations/index.html">Limitations</a></li></ul></li>
            <li class="" data-nav-url="/weblogic-deploy-tooling/samples/index.html"><a class="padding" href="/weblogic-deploy-tooling/samples/index.html"><b> </b>Samples</a><ul id="R-subsections-88c2b1e6419b221ce89c4be4a8ae2a6b" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="/weblogic-deploy-tooling/developer/index.html"><a class="padding" href="/weblogic-deploy-tooling/developer/index.html"><b> </b>Developer Guide</a><ul id="R-subsections-6b6629b4a7f3145ff0ada8006909039e" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="/weblogic-deploy-tooling/release-notes/index.html"><a class="padding" href="/weblogic-deploy-tooling/release-notes/index.html"><b> </b>Release Notes</a><ul id="R-subsections-69eef8340bbcc56dffc8dd98905aeadf" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
          </ul>
        </div>
<div id="R-footer">

<p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp</p>
<p><a href="https://github.com/oracle/weblogic-deploy-tooling"><i class="fab fa-github"></i> GitHub repo</a></p>
<p><a href="https://join.slack.com/t/oracle-weblogic/shared_invite/zt-1ni1gtjv6-PGC6CQ4uIte3KBdm_67~aQ"><i class="fab fa-slack"></i> Public Slack #weblogic</a></p>
</div>
      </div>
    </aside>
    <script src="/weblogic-deploy-tooling/js/perfect-scrollbar/perfect-scrollbar.min.js?1771646010" defer></script>
    <script src="/weblogic-deploy-tooling/js/theme.min.js?1771646010" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>
